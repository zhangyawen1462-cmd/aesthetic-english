# Aesthetic English 自动化工作流完整指南

## 📋 目录

1. [工作流概览](#工作流概览)
2. [三种发布场景](#三种发布场景)
3. [第一步：上传素材](#第一步上传素材)
4. [第二步：布局排版](#第二步布局排版)
5. [第三步：审核发布](#第三步审核发布)
6. [Notion AI 数据检查 Prompt](#notion-ai-数据检查-prompt)

---

## 🎯 工作流概览

### 三种发布路径

```
🖼️ 纯图片卡片：上传 → 拖拽排版 → 立即生效
🎨 精选视频：上传 → 拖拽排版 → 审核发布
📦 仅 Archives：上传 → 直接发布（无需排版）
```

**核心理念：**
- 素材上传与布局排版分离
- 精选页面通过可视化拖拽管理
- Archives 按时间自动排序

---

## 📦 三种发布场景

### 场景 1：🖼️ 纯图片卡片（氛围装饰）

**适用于：** Dashboard 和 Daily Cinema 的氛围卡片

**特点：**
- 只需要一张图片
- 不显示标题
- 不需要分类
- 不收录在 Archives
- 仅用于视觉装饰

**工作流：**
```
上传图片 → 拖拽到卡片槽位 → 保存布局 → 立即生效
```

---

### 场景 2：🎨 精选视频（需要排版）

**适用于：** Dashboard、Daily Cinema、Cognitive、Business 精选页面

**特点：**
- 需要完整的课程信息
- 需要 AI 生成学习内容
- 需要通过布局管理器排版
- 同时显示在精选页和 Archives

**工作流：**
```
上传素材 → AI 生成内容 → 拖拽排版 → 审核 → 发布
```

---

### 场景 3：📦 仅 Archives（无需排版）

**适用于：** 只想归档，不在精选页展示的视频

**特点：**
- 需要完整的课程信息
- 需要 AI 生成学习内容
- 无需布局管理器排版
- 只显示在 Archives，按时间排序

**工作流：**
```
上传素材 → AI 生成内容 → 审核 → 发布
```

---

## 第一步：上传素材

### 访问地址
```
http://localhost:8080/admin/publish
```

### 场景 1：上传纯图片卡片

#### 1. 选择内容类型
- 点击"🖼️ 纯图片"

#### 2. 填写信息
- **Lesson ID**: 例如 `mood-01`（仅用于后台识别）

#### 3. 上传素材
- **封面图片**：必填，作为氛围卡片显示

#### 4. 点击按钮
- 点击"📦 上传到资源池"

#### 5. 下一步
- 前往布局管理器拖拽排版

---

### 场景 2：上传精选视频

#### 1. 选择内容类型
- 点击"🎬 视频课程"

#### 2. 选择发布目标
- 点击"🎨 精选页面"

#### 3. 填写信息
- **Lesson ID**: 例如 `daily-01`
- **期数**: 例如 `01`
- **英文标题**: 例如 `Morning Ritual`
- **中文标题**: 例如 `晨间唤醒`
- **分类**: 选择 Daily / Cognitive / Business

#### 4. 上传素材
- **封面图片**：可选
- **视频文件**：可选
- **SRT 字幕**：必填（用于 AI 生成学习内容）

#### 5. 点击按钮
- 点击"📦 上传到资源池"

#### 6. 系统自动
- 上传文件到 OSS
- AI 生成词汇、语法、回译
- 创建 Notion 页面（状态：Draft）

#### 7. 下一步
- 前往布局管理器拖拽排版

---

### 场景 3：上传仅 Archives 视频

#### 1. 选择内容类型
- 点击"🎬 视频课程"

#### 2. 选择发布目标
- 点击"📦 仅 Archives"

#### 3. 填写信息
- **Lesson ID**: 例如 `daily-01`
- **期数**: 例如 `01`
- **英文标题**: 例如 `Morning Ritual`
- **中文标题**: 例如 `晨间唤醒`
- **分类**: 选择 Daily / Cognitive / Business

#### 4. 上传素材
- **封面图片**：可选
- **视频文件**：可选
- **SRT 字幕**：必填（用于 AI 生成学习内容）

#### 5. 点击按钮
- 点击"✅ 直接发布到 Archives"

#### 6. 系统自动
- 上传文件到 OSS
- AI 生成词汇、语法、回译
- 创建 Notion 页面（状态：Draft）
- 设置 Display_Position 为 `archive-only`

#### 7. 下一步
- 直接在 Notion 中审核发布（无需排版）

---

## 第二步：布局排版

> **注意：** 仅场景 1（纯图片）和场景 2（精选视频）需要此步骤
> 
> 场景 3（仅 Archives）跳过此步骤

### 访问地址
```
http://localhost:8080/admin/layout-manager
```

### 页面布局说明

#### 🏠 Dashboard（8个槽位）
```
左列                    右列
#1 [3:4 视频]          #5 [1:1 卡片]
#2 [1:1 卡片]          #6 [9:16 卡片]
#3 [9:16 卡片]         #7 [3:4 视频]
#4 [1:1 卡片]          #8 [3:4 视频]
```

**特点：**
- 混合比例布局
- 视频槽位显示标题
- 卡片槽位无标题

#### 🎬 Daily Cinema（6个槽位）
```
左列                    右列
#1 [9:16 卡片]         #2 [1:1 视频]
#3 [3:4 视频]          #4 [9:16 卡片]
#5 [1:1 卡片]          #6 [3:4 视频]
```

**特点：**
- 双列同步滚动
- 3:4 视频和 #2 的 1:1 视频显示标题
- 其他为纯卡片

#### 🧠 Cognitive（2个槽位）
```
左列                    右列
#1 [16:9 视频]         #2 [16:9 视频]
```

**特点：**
- 横屏布局
- 显示前 2 期课程

#### 💼 Business（2个槽位）
```
左列                    右列
#1 [16:9 视频]         #2 [16:9 视频]
```

**特点：**
- 横屏布局
- 显示前 2 期课程

### 操作步骤

#### 1. 选择标签页
点击顶部标签切换页面：
- 🏠 Dashboard 精选
- 🎬 Daily Cinema
- 🧠 Cognitive 精选
- 💼 Business 精选

#### 2. 拖拽排版

**左侧：布局预览区**
- 显示实际的双列布局
- 每个方框是一个槽位
- 显示槽位编号、比例、类型

**右侧：可用课程**
- 显示所有已发布的课程
- 根据分类自动过滤

**拖拽操作：**
1. 从右侧拖拽课程到左侧槽位
2. 左侧槽位之间可以交换位置
3. 点击 X 删除课程

**注意事项：**
- 视频课程 → 拖到"视频槽位"
- 纯图片 → 拖到"卡片槽位"
- 悬停时槽位会高亮显示

#### 3. 预览效果
点击"预览"按钮，在新标签页查看实际效果

#### 4. 保存布局
点击右下角"💾 保存布局"按钮

**系统自动：**
- 更新 Notion 中的 `Display_Position` 字段
- 更新 Notion 中的 `Sort_Order` 字段
- 数字越小越靠前（1 > 2 > 3...）

**Display_Position 值：**
- `dashboard-featured` - Dashboard 精选
- `daily-cinema` - Daily Cinema
- `cognitive-featured` - Cognitive 精选
- `business-featured` - Business 精选

---

## 第三步：审核发布

### 在 Notion 中检查

#### 1. 打开 Notion 数据库
访问你的 Aesthetic English 数据库

#### 2. 使用 AI 检查数据
复制下方的 [Notion AI 检查 Prompt](#notion-ai-数据检查-prompt)，在 Notion 中使用

#### 3. 检查内容

**基础信息：**
- ✅ Lesson ID 唯一
- ✅ 标题完整
- ✅ 分类正确
- ✅ 期数正确

**素材链接：**
- ✅ Cover_Img URL 有效
- ✅ Video_URL 有效（视频课程）
- ✅ SRT_URL 有效（视频课程）

**AI 生成内容（视频课程）：**
- ✅ Vocabulary 词汇列表
- ✅ Grammar 语法点
- ✅ Back_Translation 回译

**布局信息：**
- ✅ Display_Position 已设置
- ✅ Sort_Order 已设置
- ✅ 排序顺序合理

#### 4. 发布课程

确认无误后：
1. 将 `Status` 从 `Draft` 改为 `Published`
2. 课程立即在前端显示

---

## Notion AI 数据检查 Prompt

```
请帮我检查这个 Aesthetic English 课程数据库，重点检查以下内容：

## 1. 数据完整性检查
- 检查是否有 Lesson_ID 重复的记录
- 检查是否有必填字段为空的记录（Lesson_ID、Title_EN、Title_CN、Category、EP）
- 检查 Status 字段是否只包含 Draft 或 Published

## 2. 素材链接检查
- 检查 Cover_Img 字段是否为空或格式不正确
- 检查 Video_URL 字段（视频课程必填）
- 检查 SRT_URL 字段（视频课程必填）
- 列出所有缺失素材链接的记录

## 3. AI 生成内容检查（仅视频课程）
- 检查 Vocabulary 字段是否为空
- 检查 Grammar 字段是否为空
- 检查 Back_Translation 字段是否为空
- 列出所有 AI 内容缺失的视频课程

## 4. 布局信息检查
- 检查 Display_Position 字段是否已设置
- 检查 Sort_Order 字段是否已设置
- 检查同一 Display_Position 下是否有重复的 Sort_Order
- 列出所有未设置布局信息的记录

## 5. 分类统计
- 统计每个分类（Daily/Cognitive/Business）的课程数量
- 统计每个 Display_Position 的课程数量
- 统计 Draft 和 Published 状态的课程数量

## 6. 异常数据
- 列出所有数据异常的记录
- 提供修复建议

请以清晰的格式输出检查结果，优先列出需要修复的问题。
```

---

## 🎯 工作流总结

### 优势

✅ **简化发布**
- 发布时不需要考虑排版
- 只关注内容本身

✅ **可视化排版**
- 直观的拖拽操作
- 实时预览效果

✅ **自动化管理**
- 自动生成排序字段
- 自动更新 Notion 数据

✅ **灵活调整**
- 随时调整布局
- 无需重新发布

### 最佳实践

1. **批量发布**：先发布多个课程，再统一排版
2. **定期检查**：使用 Notion AI Prompt 定期检查数据
3. **预览确认**：保存布局前先预览效果
4. **状态管理**：Draft 用于测试，Published 用于正式发布

### 常见问题

**Q: 发布后可以修改布局吗？**
A: 可以，随时在布局管理器中调整，保存后立即生效。

**Q: 纯图片卡片需要标题和分类吗？**
A: 需要填写标题（用于后台管理），但不需要选择分类，前端不显示标题。

**Q: 纯图片卡片会显示在 Archives 吗？**
A: 不会，纯图片卡片仅用于装饰，不会被收录在 Archives 归档页面中。

**Q: 如何删除已发布的课程？**
A: 在 Notion 中将 Status 改为 Draft 或直接删除记录。

**Q: Sort_Order 可以重复吗？**
A: 不建议，同一 Display_Position 下应该唯一。

**Q: 布局管理器支持移动端吗？**
A: 建议使用桌面端操作，体验更好。

---

## 📞 技术支持

如有问题，请检查：
1. Notion API 配置是否正确
2. 阿里云 OSS 配置是否正确
3. DeepSeek API 配置是否正确
4. 浏览器控制台是否有错误信息

---

**最后更新：** 2026-02-14
**版本：** v1.0


