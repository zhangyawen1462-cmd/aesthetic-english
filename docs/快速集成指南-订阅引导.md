# ğŸš€ å¿«é€Ÿé›†æˆæŒ‡å— - 3 æ­¥å®Œæˆ

## ğŸ“ ä½ éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶

æ ¹æ®ä½ çš„é¡¹ç›®ç»“æ„ï¼Œé€‰æ‹©ä»¥ä¸‹å…¶ä¸­ä¸€ç§æ–¹å¼ï¼š

---

## æ–¹æ¡ˆ A: åœ¨è¯¾ç¨‹åˆ—è¡¨è§†å›¾ä¸­é›†æˆï¼ˆæ¨èï¼‰

### 1. ä¿®æ”¹ `components/course/DailyCinemaView.tsx`

åœ¨æ–‡ä»¶é¡¶éƒ¨æ·»åŠ å¯¼å…¥ï¼š

```typescript
import { useSubscriptionGuard } from '@/lib/hooks/useSubscriptionGuard';
import SubscriptionModal from '@/components/SubscriptionModal';
```

åœ¨ç»„ä»¶å†…éƒ¨æ·»åŠ  Hookï¼š

```typescript
export default function DailyCinemaView() {
  // ... ç°æœ‰çš„ state å’Œ hooks
  
  // ğŸ†• æ·»åŠ è®¢é˜…å¼•å¯¼
  const { shouldShowSubscription, handleCourseClick, closeSubscriptionModal } = useSubscriptionGuard();
  
  // ... å…¶ä½™ä»£ç 
}
```

æ‰¾åˆ°è¯¾ç¨‹å¡ç‰‡çš„ `<Link>` æ ‡ç­¾ï¼Œæ·»åŠ  `onClick` å¤„ç†ï¼š

```typescript
<Link 
  href={`/course/${category}/${course.id}`}
  onClick={handleCourseClick}  // ğŸ†• æ·»åŠ è¿™ä¸€è¡Œ
  className="block w-full"
>
  {/* è¯¾ç¨‹å¡ç‰‡å†…å®¹ */}
</Link>
```

åœ¨ç»„ä»¶çš„ `return` è¯­å¥æœ€åï¼Œæ·»åŠ å¼¹çª—ï¼š

```typescript
return (
  <div className="...">
    {/* ç°æœ‰çš„æ‰€æœ‰å†…å®¹ */}
    
    {/* ğŸ†• æ·»åŠ è®¢é˜…å¼•å¯¼å¼¹çª— */}
    <SubscriptionModal
      isOpen={shouldShowSubscription}
      onClose={closeSubscriptionModal}
    />
  </div>
);
```

### 2. åŒæ ·ä¿®æ”¹ `components/course/CognitiveCatalogView.tsx`

é‡å¤ä¸Šè¿°æ­¥éª¤ã€‚

### 3. åŒæ ·ä¿®æ”¹ `components/course/BusinessRiverView.tsx`

é‡å¤ä¸Šè¿°æ­¥éª¤ã€‚

---

## æ–¹æ¡ˆ B: åœ¨ Dashboard é¡µé¢ä¸­é›†æˆ

å¦‚æœä½ æœ‰ä¸€ä¸ªç»Ÿä¸€çš„ Dashboard é¡µé¢ï¼Œå¯ä»¥åœ¨é‚£é‡Œæ·»åŠ ï¼š

### ä¿®æ”¹ `app/dashboard/page.tsx`

```typescript
"use client";

import { useSubscriptionGuard } from '@/lib/hooks/useSubscriptionGuard';
import SubscriptionModal from '@/components/SubscriptionModal';

export default function DashboardPage() {
  const { shouldShowSubscription, handleCourseClick, closeSubscriptionModal } = useSubscriptionGuard();

  return (
    <div>
      {/* ä½ çš„ Dashboard å†…å®¹ */}
      
      {/* æ‰€æœ‰è¯¾ç¨‹é“¾æ¥éƒ½æ·»åŠ  onClick */}
      <Link 
        href="/course/daily/001"
        onClick={handleCourseClick}
      >
        è¯¾ç¨‹å¡ç‰‡
      </Link>

      {/* è®¢é˜…å¼•å¯¼å¼¹çª— */}
      <SubscriptionModal
        isOpen={shouldShowSubscription}
        onClose={closeSubscriptionModal}
      />
    </div>
  );
}
```

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. æ¸…é™¤ Cookieï¼ˆæ¨¡æ‹Ÿæ¸¸å®¢ï¼‰

åœ¨æµè§ˆå™¨ Console ä¸­è¿è¡Œï¼š

```javascript
// æ¸…é™¤æ‰€æœ‰ Cookie
document.cookie.split(";").forEach(c => {
  document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/");
});

// æ¸…é™¤ localStorage
localStorage.clear();

// åˆ·æ–°é¡µé¢
location.reload();
```

### 2. è®¿é—® Dashboard

è®¿é—®ï¼š`http://localhost:3000/dashboard`

### 3. ç‚¹å‡»ä»»æ„è¯¾ç¨‹

åº”è¯¥çœ‹åˆ°ï¼š
- âœ… èƒŒæ™¯æ¨¡ç³Šå¹¶å˜æš—
- âœ… ä¼˜é›…çš„è®¢é˜…å¼•å¯¼å¼¹çª—ä»ä¸‹æ–¹æµ®èµ·
- âœ… æ˜¾ç¤ºä¸‰ä¸ªè®¢é˜…é€‰é¡¹
- âœ… åŠ¨ç”»æµç•…ï¼Œæœ‰ç‰©ç†é˜»å°¼æ„Ÿ

### 4. æµ‹è¯•äº¤äº’

- âœ… ç‚¹å‡»èƒŒæ™¯ â†’ å¼¹çª—å…³é—­
- âœ… ç‚¹å‡» X æŒ‰é’® â†’ å¼¹çª—å…³é—­
- âœ… ç‚¹å‡» "Return to lobby" â†’ å¼¹çª—å…³é—­
- âœ… ç‚¹å‡» "Redeem Invitation" â†’ è·³è½¬åˆ° `/redeem`

### 5. æµ‹è¯•ä¼šå‘˜é€šè¡Œ

1. æ¿€æ´»ä¸€ä¸ªæµ‹è¯•å…‘æ¢ç 
2. è¿”å› Dashboard
3. ç‚¹å‡»è¯¾ç¨‹
4. åº”è¯¥æ­£å¸¸è·³è½¬ï¼ˆä¸æ˜¾ç¤ºå¼¹çª—ï¼‰

---

## ğŸ“ å®Œæ•´ç¤ºä¾‹ä»£ç 

### DailyCinemaView.tsx å®Œæ•´ä¿®æ”¹ç¤ºä¾‹

```typescript
"use client";

import React, { useState, useEffect } from "react";
import Link from "next/link";
import { motion } from "framer-motion";
import { ArrowLeft, Play } from "lucide-react";
import type { Lesson } from "@/data/types";
import { useSubscriptionGuard } from '@/lib/hooks/useSubscriptionGuard';  // ğŸ†•
import SubscriptionModal from '@/components/SubscriptionModal';  // ğŸ†•

export default function DailyCinemaView() {
  const [lessons, setLessons] = useState<Lesson[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  
  // ğŸ†• æ·»åŠ è®¢é˜…å¼•å¯¼
  const { shouldShowSubscription, handleCourseClick, closeSubscriptionModal } = useSubscriptionGuard();

  // ... ç°æœ‰çš„ useEffect å’Œå…¶ä»–é€»è¾‘

  return (
    <div className="min-h-screen w-full bg-ecru">
      {/* Header */}
      <header className="px-8 py-6">
        <Link href="/dashboard">
          <ArrowLeft size={20} />
        </Link>
      </header>

      {/* è¯¾ç¨‹åˆ—è¡¨ */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-6 px-8">
        {lessons.map(lesson => (
          <Link 
            key={lesson.id}
            href={`/course/daily/${lesson.id}`}
            onClick={handleCourseClick}  // ğŸ†• æ·»åŠ æ‹¦æˆª
            className="block"
          >
            <div className="relative aspect-video">
              <img 
                src={lesson.coverImg} 
                alt={lesson.titleEn}
                className="w-full h-full object-cover"
              />
              <div className="absolute inset-0 flex items-center justify-center">
                <Play size={48} />
              </div>
            </div>
            <h3 className="mt-4 text-lg">{lesson.titleCn}</h3>
          </Link>
        ))}
      </div>

      {/* ğŸ†• è®¢é˜…å¼•å¯¼å¼¹çª— */}
      <SubscriptionModal
        isOpen={shouldShowSubscription}
        onClose={closeSubscriptionModal}
      />
    </div>
  );
}
```

---

## âš¡ å¿«é€Ÿæ£€æŸ¥æ¸…å•

- [ ] å·²åˆ›å»º `components/SubscriptionModal.tsx`
- [ ] å·²åˆ›å»º `lib/hooks/useSubscriptionGuard.ts`
- [ ] å·²åœ¨è¯¾ç¨‹åˆ—è¡¨ç»„ä»¶ä¸­å¯¼å…¥ Hook å’Œ Modal
- [ ] å·²åœ¨ `<Link>` æ ‡ç­¾æ·»åŠ  `onClick={handleCourseClick}`
- [ ] å·²åœ¨ç»„ä»¶æœ«å°¾æ·»åŠ  `<SubscriptionModal>`
- [ ] å·²æµ‹è¯•æ¸¸å®¢æ‹¦æˆªåŠŸèƒ½
- [ ] å·²æµ‹è¯•ä¼šå‘˜é€šè¡ŒåŠŸèƒ½
- [ ] å·²æµ‹è¯•å¼¹çª—äº¤äº’

---

## ğŸ¯ é¢„æœŸæ•ˆæœ

### æ¸¸å®¢ä½“éªŒ
```
è®¿é—® Dashboard â†’ çœ‹åˆ°ç²¾ç¾å°é¢ â†’ ç‚¹å‡»è¯¾ç¨‹ 
â†’ [æ‹¦æˆª] å¼¹å‡ºä¼˜é›…çš„è®¢é˜…å¼•å¯¼ 
â†’ "The gallery is reserved for Patrons."
â†’ ç‚¹å‡» "Redeem Invitation" â†’ è·³è½¬åˆ° /redeem
```

### ä¼šå‘˜ä½“éªŒ
```
è®¿é—® Dashboard â†’ çœ‹åˆ°ç²¾ç¾å°é¢ â†’ ç‚¹å‡»è¯¾ç¨‹ 
â†’ [é€šè¡Œ] ç›´æ¥è¿›å…¥è¯¾ç¨‹å­¦ä¹ 
```

---

## ğŸ’¡ æç¤º

1. **ä¸è¦åœ¨æ‰€æœ‰é“¾æ¥ä¸Šéƒ½æ·»åŠ æ‹¦æˆª**
   - åªåœ¨è¯¾ç¨‹å¡ç‰‡çš„é“¾æ¥ä¸Šæ·»åŠ 
   - å¯¼èˆªé“¾æ¥ã€è¿”å›æŒ‰é’®ç­‰ä¸éœ€è¦æ‹¦æˆª

2. **ä¿æŒç”¨æˆ·ä½“éªŒæµç•…**
   - ä¸è¦åœ¨é¡µé¢åŠ è½½æ—¶å°±å¼¹çª—
   - åªåœ¨ç”¨æˆ·ä¸»åŠ¨ç‚¹å‡»æ—¶æ‰æ‹¦æˆª

3. **æµ‹è¯•ä¸åŒåœºæ™¯**
   - æ¸¸å®¢è®¿é—®
   - å­£åº¦ä¼šå‘˜è®¿é—®
   - å¹´åº¦ä¼šå‘˜è®¿é—®
   - æ°¸ä¹…ä¼šå‘˜è®¿é—®

---

## ğŸ‰ å®Œæˆï¼

ç°åœ¨ä½ çš„ç½‘ç«™æ‹¥æœ‰äº†ä¼˜é›…çš„æ¸¸å®¢æ‹¦æˆªç³»ç»Ÿï¼

å½“æ¸¸å®¢ç‚¹å‡»è¯¾ç¨‹æ—¶ï¼Œä»–ä»¬ä¼šçœ‹åˆ°ä¸€ä»½"ç§äººä¿±ä¹éƒ¨å…¥ä¼šé‚€è¯·å‡½"ï¼Œè€Œä¸æ˜¯å†·å†°å†°çš„"è¯·ç™»å½•"ã€‚

è¿™å°±æ˜¯é¡¶çº§äº§å“çš„è®¾è®¡å“²å­¦ï¼ğŸŠ






